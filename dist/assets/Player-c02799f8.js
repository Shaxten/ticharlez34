import{r as L,I as S,R as V,d as q,_ as I,g as d,U as m,e as n,m as M,f as N,h as j,o as k,c as b,b as f,i as A,w as H,v as R,j as B,F as T,k as F,Q as J,l as C,t as E}from"./index-132cc940.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";let U;const g=L("test"),W={data(){return{users:[],bosses:[]}},methods:{async getUsers(){var e=g.value.replace("@hotmail.com","");S(V(I(n,"warriors"),q("name","==",e)),c=>{c.forEach(v=>{this.users.push(v.data())})})},async createCharacter(){var e=g.value.replace("@hotmail.com","");const c=d(n,"warriors",e);try{await m(n,async v=>{(await v.get(c)).exists()?document.getElementById("erreur").innerHTML="Vous avez déjà un personnage!":M(d(n,"warriors",e),{name:e,atk:5,level:1})})}catch(v){console.error(v)}},check(){var e=g.value.replace("@hotmail.com","");document.getElementById("check").innerHTML=e}},setup(){},mounted(){U=N(),j(U,t=>{t&&(g.value=t.email)})}},o=new tmi.Client({identity:{username:"shaxten19",password:"i1km9nex76bb1gbh44k7riuac8x966"},channels:["shaxten19"]});o.connect();o.on("message",(t,e,c,v)=>{if(c==="!attack"){const r=d(n,"warriors",e["display-name"]),s=d(n,"bosses","HSOMmixhXaiu3EbwUHJo"),a=d(n,"bosses","Dragon");m(n,async u=>{const l=await u.get(s),y=await u.get(r),p=await u.get(a);if(!l.exists())return o.say(t,"");const x=l.data().HP-y.data().atk,h=p.data().HP-y.data().atk;return x>0&&l.data().active==1?(u.update(s,{HP:x}),u.update(r,{canDrop:1}),o.say(t,`(-${y.data().atk}) le ${l.data().name} à ${x} vie restant`)):h>0&&p.data().active==1?(u.update(a,{HP:h}),u.update(r,{canDrop:1}),o.say(t,`(-${y.data().atk}) le ${p.data().name} à ${h} vie restant`)):x<=0&&l.data().active==1?(u.update(s,{HP:0,active:0}),u.update(r,{canDrop:1}),n.collection("warriors").get().then(function(P){P.forEach(function(i){var D=Math.ceil(Math.random()*2),w=i.data().exp+l.data().giveXP;D==1&&i.data().canDrop==1||D==45&&i.data().canDrop==1||D==19&&i.data().canDrop==1?i.ref.update({canDrop:0,item:1,exp:w}):D==2&&i.data().canDrop==1?i.ref.update({canDrop:0,item:2,exp:w}):i.data().canDrop==1&&i.ref.update({canDrop:0,random:D,exp:w})})}),o.say(t,`Le ${l.data().name} à été tué par @${e.username}`)):h<=0&&p.data().active==1?(u.update(a,{HP:0,active:0}),u.update(r,{canDrop:1}),n.collection("warriors").get().then(function(P){P.forEach(function(i){var D=1,w=1,X=1,$=Math.ceil(Math.random()*D),_=i.data().exp+p.data().giveXP;$==X&&i.data().canDrop==1||$==0&&i.data().canDrop==1?i.ref.update({canDrop:0,swords:J(w),exp:_}):i.data().canDrop==1&&i.ref.update({canDrop:0,random:$,exp:_})})}),o.say(t,`Le ${p.data().name} à été tué par @${e.username}`)):o.say(t,"Aucun monstre n'est disponible")})}if(c==="!showHP"){const r=d(n,"bosses","HSOMmixhXaiu3EbwUHJo");m(n,async s=>{const a=await s.get(r);if(!a.exists())throw"Document does not exist!";return a.data().active==1?o.say(t,`@${e.username}, le ${a.data().name} à encore ${a.data().HP} point de vie!`):o.say(t,"Aucun monstre n'est disponible")})}if(c==="!create"){const r=d(n,"warriors",e["display-name"]);m(n,async s=>(await s.get(r)).exists()?o.say(t,"Vous avez déjà un personnage"):(M(d(n,"warriors",e["display-name"]),{name:e["display-name"],atk:5,level:1,canDrop:0,item:0,random:0,exp:0}),o.say(t,`@${e.username} votre personnage à été créer`)))}if(c==="!stats"){const r=d(n,"warriors",e["display-name"]);m(n,async s=>{const a=await s.get(r);return a.exists()?o.say(t,`@${e.username}, Niveau ${a.data().level} et à une attaque de ${a.data().atk}`):o.say(t,`@${e.username}, tu n'as pas de personnage, tu peux le créer avec la commande !create`)})}if(c==="!lvlUP"){const r=d(n,"warriors",e["display-name"]);m(n,async s=>{const a=await s.get(r);var u=a.data().exp,l=a.data().level*20,y=l-u,p=a.data().level+1,x=u-l,h=a.data().atk+5;return a.exists()?u>=l?(s.update(r,{level:p,exp:x,atk:h}),o.say(t,`@${e.username}, vient de monter au niveau ${p}`)):o.say(t,`@${e.username}, il te manque ${y}xp pour monter de niveau`):o.say(t,`@${e.username}, tu n'as pas de personnage, tu peux le créer avec la commande !create`)})}if(c==="!spawn Golem"&&e.username=="shaxten19"){const r=d(n,"bosses","HSOMmixhXaiu3EbwUHJo");m(n,async s=>(await s.get(r)).data().active==0?(s.update(r,{HP:50,active:1,giveXP:5}),o.say(t,"Le Golem revient en force avec 50 point de vie")):o.say(t,"Il y a déjà un monstre qui attaque"))}if(c==="!spawn"&&e.username=="shaxten19"){const r=d(n,"bosses","Dragon");m(n,async s=>(await s.get(r)).data().active==0?(s.update(r,{name:"Elf",HP:125,active:1,giveXP:5}),o.say(t,"Un Elf apparait 125 point de vie")):o.say(t,"Il y a déjà un monstre qui attaque"))}});const z={class:"center mt-8"},G={key:0},Q={class:"mt-8"},K=f("h1",{style:{color:"red"},id:"erreur"},null,-1),Y=f("h1",null,[C("Si n'as pas de personnage,"),f("br"),C(" crée en un maintenant!")],-1),Z={id:"attack"};function ee(t,e,c,v,r,s){return k(),b("div",z,[r.users.length<=0?(k(),b("div",G,[f("button",{class:"boutonC",onClick:e[0]||(e[0]=(...a)=>s.getUsers&&s.getUsers(...a))},"Voir votre personnage")])):A("",!0),H(f("div",Q,[K,Y,f("button",{onClick:e[1]||(e[1]=(...a)=>s.createCharacter&&s.createCharacter(...a)),class:"boutonC",type:"submit"},"Create character")],512),[[R,r.users.length<=0]]),H(f("input",{hidden:"","onUpdate:modelValue":e[2]||(e[2]=a=>t.email=a),id:"email"},null,512),[[B,t.email]]),(k(!0),b(T,null,F(r.users,a=>H((k(),b("div",{key:a.id},[f("p",null,E(a.name),1),f("p",Z,"Damage: "+E(a.atk),1)])),[[R,r.users.length>=1]])),128))])}const re=O(W,[["render",ee]]);export{re as default};
